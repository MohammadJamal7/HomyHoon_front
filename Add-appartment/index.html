<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Apartment</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Archivo:ital,wght@0,100..900;1,100..900&display=swap');

        html, body {
            font-family: "Archivo", sans-serif;
        }

        .purple {
            background-color: #6f42c1;
            color: white;
        }

        .purple:hover {
            background-color: #5a379d;
        }

        /* Uploading images style */
        .card {
            border: 1px solid #e0e0e0;
            border-radius: 8px;
        }

        .card-header {
            background-color: #fff;
            border-bottom: 1px solid #e0e0e0;
        }

        .image-container {
            position: relative;
            padding-bottom: 100%;
            overflow: hidden;
        }

        .image-container img {
            position: absolute;
            object-fit: cover;
            width: 100%;
            height: 100%;
        }

        .add-image {
            border: 2px dashed #e0e0e0;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            height: 150px;
        }

        .add-image:hover {
            background-color: #f8f9fa;
        }

        #fileInput {
            display: none;
        }

        .image-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
        }
    </style>
</head>

<body>

    <div id="mynav"></div>

    <h2 class="ms-5" style="margin-top: 150px;">Add your apartment easily</h2>

    <div class="container-fluid shadow mt-5 rounded p-4" style="width: 95%; height: auto;">

        <div class="row">
            <div class="col">
                <span class="fs-6 me-1 fw-bold">General information</span> <span><img src="Assets/check.svg" alt=""></span>
            </div>
        </div>

        <!-- Form Section -->
        <div class="row mt-4">
            <div class="col-sm-12 col-md-4">
                <label for="title" class="fw-semibold"><small>Title</small></label>
                <input type="text" class="form-control bg-light" name="title" placeholder="Big flat with two doors" style="height: 32px;">
            </div>
            <div class="col-sm-12 col-md-4">
                <label for="title" class="fw-semibold"><small>Category</small></label>
                <select class="form-select bg-light" aria-label="Default select" style="height: 32px;">
                    <option selected>Flat</option>
                    <option value="1">Villa</option>
                    <option value="2">Studio</option>
                </select>
            </div>
            <div class="col-sm-12 col-md-4">
                <label for="price" class="fw-semibold"><small>Sale price $</small></label>
                <input type="number" class="form-control bg-light" placeholder="25" name="price" style="height: 32px;">
            </div>
        </div>

        <div class="row pt-4 g-3">
            <div class="col-sm-12 col-md-4">
                <label for="rooms" class="fw-semibold"><small>Rooms</small></label>
                <select class="form-select bg-light" aria-label="Default select" style="height: 32px;">
                    <option selected>1 room</option>
                    <option value="1">2 rooms</option>
                    <option value="2">3 rooms</option>
                    <option value="3">+4 rooms</option>
                </select>
            </div>

            <div class="col-sm-12 col-md-4">
                <label for="beds" class="fw-semibold"><small>Beds</small></label>
                <select class="form-select bg-light" aria-label="Default select" style="height: 32px;">
                    <option selected>1 bed</option>
                    <option value="1">2 beds</option>
                    <option value="2">+3 beds</option>
                </select>
            </div>

            <div class="col-sm-12 col-md-4">
                <label for="furnished" class="fw-semibold"><small>Furnished?</small></label>
                <select class="form-select bg-light" aria-label="Default select" style="height: 32px;">
                    <option selected>Yes</option>
                    <option value="1">No</option>
                </select>
            </div>
        </div>

        <!-- Description -->
        <div class="row pt-4">
            <div class="col">
                <label for="description" class="fw-semibold"><small>Description</small></label>
                <textarea name="description" rows="5" class="form-control bg-light" placeholder="Write something to describe your apartment..." cols="8"></textarea>
            </div>
        </div>
        <hr class="mt-5">
        <div class="row mt-4">
            <div class="col-lg-7 col-sm-12">
                <div class="container-fluid rounded p-3" style="min-height: 30vh;">
                    <span class="fs-6 me-1 fw-bold">Media</span> <span><img src="Assets/check.svg" alt=""></span>
                    <div class="container">
                        <p id="albumCount" class="text-muted mb-3">Album 0 / 5 images</p>
                                <div id="imageGrid" class="image-grid">
                                    <div id="addImageBtn" class="add-image">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-plus" viewBox="0 0 16 16">
                                            <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
                                        </svg>
                                    </div>
                                </div>
                    </div>

                    <input type="file" multiple id="fileInput" accept="image/*" aria-label="Upload image">
                </div>
            </div>
            <div class="col-lg-5 col-sm-12">
                <div class="container-fluid rounded p-4" style="min-height: 30vh;">
                    <span class="fs-6 me-1 fw-bold">Location</span> <span><img src="Assets/check.svg" alt=""></span>
                    <div class="container bg-light mt-2 rounded" style="min-height: 20vh;"></div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col d-flex justify-content-center">
                <button class="btn purple w-25">Submit</button>
            </div>
        </div>
    </div>

    <div id="myFooter"></div>

    <script>
        fetch("../Components/navbar.html")
            .then((response) => response.text())
            .then((data) => {
                document.getElementById("mynav").innerHTML = data;
            });

        fetch('../Components/footer.html')
            .then((response) => response.text())
            .then((data) => {
                document.getElementById("myFooter").innerHTML = data;
            });

      document.addEventListener('DOMContentLoaded', function() {
    const toggleBtn = document.getElementById('toggleBtn');
    const cardBody = document.getElementById('cardBody');
    const imageGrid = document.getElementById('imageGrid');
    const addImageBtn = document.getElementById('addImageBtn');
    const albumCount = document.getElementById('albumCount');
    const fileInput = document.getElementById('fileInput');

    let isExpanded = true;
    let imageCount = 0;
    const maxImages = 5;

    function updateAlbumCount() {
        albumCount.textContent = `Album ${imageCount} / ${maxImages} images`;
    }

    function toggleExpand() {
        isExpanded = !isExpanded;
        cardBody.style.display = isExpanded ? 'block' : 'none';
        toggleBtn.innerHTML = isExpanded 
            ? '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-up" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M7.646 4.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1-.708.708L8 5.707l-5.646 5.647a.5.5 0 0 1-.708-.708l6-6z"/></svg>'
            : '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>';
    }

    function addImage(file) {
        if (imageCount < maxImages) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const newImageCol = document.createElement('div');
                newImageCol.classList.add('image-item');  // Add a class to help remove the image later
                newImageCol.innerHTML = `
                    <div class="image-container rounded">
                        <img src="${e.target.result}" alt="Gallery image ${imageCount + 1}" class="img-fluid rounded">
                        <button class="delete-btn">Delete</button>  <!-- Delete button -->
                    </div>
                `;
                imageGrid.insertBefore(newImageCol, addImageBtn);
                imageCount++;
                updateAlbumCount();

                if (imageCount === maxImages) {
                    addImageBtn.style.display = 'none';
                }

                // Add event listener to delete the image when clicked
                const deleteBtn = newImageCol.querySelector('.delete-btn');
                deleteBtn.addEventListener('click', function() {
                    imageGrid.removeChild(newImageCol);
                    imageCount--;
                    updateAlbumCount();
                    if (imageCount < maxImages) {
                        addImageBtn.style.display = 'block';
                    }
                });
            };
            reader.readAsDataURL(file);
        }
    }

    addImageBtn.addEventListener('click', function() {
        fileInput.click();
    });

    fileInput.addEventListener('change', function(event) {
        const files = event.target.files;

        // Loop through each selected file and process them
        Array.from(files).forEach(function(file) {
            if (imageCount < maxImages) {
                addImage(file);  // Call addImage for each file
            }
        });

        // Clear the input so the user can select the same file again if needed
        fileInput.value = '';
    });

    toggleBtn.addEventListener('click', toggleExpand);
    updateAlbumCount();
});
deleteBtn.addEventListener('click', function() {
    imageGrid.removeChild(newImageCol);
    imageCount--;
    updateAlbumCount();
    if (imageCount < maxImages) {
        addImageBtn.style.display = 'block';
    }
});

    </script>

</body>

</html>
